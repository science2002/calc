<html>
<head>
<title>Calcolatore GPM</title>
</head>
<style type="text/css">

* {
padding: 0;
margin: 5px;
text-align: center;
}
body {
background-color: <!-- #ff9933; -->
}
.calculatore {
width: 330px;
height: 280px;
background-color: <!-- #c0c0c0; -->
box-shadow: 0px 0px 0px 10px #666;
border: 2px solid black;
border-radius: 10px;
}
#display {
width: 300px;
height: 40px;
text-align: left;
background-color: black; <!-- black;  sfondo risultati-->
border: 3px solid white;
font-size: 18px;
left: 2px;
top: 2px;
color: #7fff00;
}
.btnTop{
color: white;
background-color: #6433FF; <!-- alternativa orig #6f6f6f; -->
font-size: 14px;
margin: auto;
width: 50px;
height: 25px;  <!--in origine avevo messo 25px-->
}
.btnNum {
color: white;
background-color: #1F1066; <!-- black; tasti num.-->
font-size: 14px;
margin: auto;
width: 50px;
height: 25px;
}
.btnMath {
color: white;
background-color: #641273; <!-- #ff4561; -->
font-size: 14px;
margin: auto;
width: 50px;
height: 25px;
}
.btnOpps {
color: white;
background-color: #5D5472; <!-- #ff9933; -->
font-size: 14px;
margin: auto;
width: 50px;
height: 25px;
.btnOpps2 {
color: white;
background-color: #5D5472; <!-- #ff9933; -->
font-size: 14px;
margin: auto;
width: 50px;
height: 25px;
}
</style>
<body>
<!-- <div class = title >Calcolatore GPM per Test Univr</div> -->
<form name="sci-calcolatrice">
<table class="calculatore" cellspacing="1" cellpadding="5" BORDER="0">
<tr> <!-- copyright start -->
<td colspan="6">
<p style="text-align: center; font-size:16px; background-color: #64BFDD; Line-height:15px;">Calcolatore GPM Per Test Univr</p>
</td>
</tr><!-- copyright end-->
<tr>
<td colspan="6"><input id="display" name="display" value="0" size="28" maxlength="25"></td>
</tr>
<tr>
<td><input type="button" class="btnTop" name="btnTop" value="C" onclick="this.form.display.value= 0 "></td>
<td><button type="button" class="btnTop" name="btnTop" value="<--" onclick="deleteChar(this.form.display)">◄−−</button></td>
<td><input type="button" class="btnMath" name="btnMath" value="cos" onclick="if(checkNum(this.form.display.value)) { cos(this.form) }"></td>
<td><input type="button" class="btnMath" name="btnMath" value="sin" onclick="if(checkNum(this.form.display.value)) { sin(this.form) }"></td>
<td><input type="button" class="btnMath" name="btnMath" value="tan" onclick="if(checkNum(this.form.display.value)) { tan(this.form) }"></td>
<td><input type="button" class="btnMath" name="btnMath" value="&#960;" onclick="addChar(this.form.display,'3.14159265359')"></td>

</tr>
<tr>
<td><input type="button" class="btnNum" name="btnNum" value="7" onclick="addChar(this.form.display, '7')"></td>
<td><input type="button" class="btnNum" name="btnNum" value="8" onclick="addChar(this.form.display, '8')"></td>
<td><input type="button" class="btnNum" name="btnNum" value="9" onclick="addChar(this.form.display, '9')"></td>
<td><button type="button" class="btnOpps" name="btnOpps" value="e&#94;" onclick="if(checkNum(this.form.display.value)) { exp(this.form) }">&nbsp;&nbsp;&nbsp;e<sup>x</sup></button></td>
 <td><button type="button" class="btnOpps" name="btnOpps" onclick="if(checkNum(this.form.display.value)) { 
 uno_su_x(this.form)}">1/x</button></td>

<td><input type="button" class="btnMath" name="btnMath" value="/" onclick="addChar(this.form.display, '/')"></td>
<tr>
<td><input type="button" class="btnNum" name="btnNum" value="4" onclick="addChar(this.form.display, '4')"></td>
<td><input type="button" class="btnNum" name="btnNum" value="5" onclick="addChar(this.form.display, '5')"></td>
<td><input type="button" class="btnNum" name="btnNum" value="6" onclick="addChar(this.form.display, '6')"></td>
<td><input type="button" class="btnOpps" name="btnOpps" value="ln" onclick="if(checkNum(this.form.display.value)) { ln(this.form) }"></td>
 <td><button type="button" class="btnOpps" name="btnOpps" onclick="if(checkNum(this.form.display.value)) { 
 lg(this.form)}">lg</button></td>
<td><input type="button" class="btnMath" name="btnMath" value="*" onclick="addChar(this.form.display, '*')"></td>
</tr>
<tr>
<td><input type="button" class="btnNum" name="btnNum" value="1" onclick="addChar(this.form.display, '1')"></td>
<td><input type="button" class="btnNum" name="btnNum" value="2" onclick="addChar(this.form.display, '2')"></td>
<td><input type="button" class="btnNum" name="btnNum" value="3" onclick="addChar(this.form.display, '3')"></td>
<td><input type="button" class="btnOpps" name="btnOpps" value="&radic;x" onclick="if(checkNum(this.form.display.value)) { sqrt(this.form) }"></td>
 <td><button type="button" class="btnOpps" name="btnOpps" onclick="if(checkNum(this.form.display.value)) { 
 sqrt_y(this.form)}"><sup>n</sup>&radic;x&nbsp;&nbsp;</button></td>

<td><input type="button" class="btnMath" name="btnMath" value="-" onclick="addChar(this.form.display, '-')"></td>
</tr>
<tr>
<td><input type="button" class="btnMath" name="btnMath" value="&#177" onclick="changeSign(this.form.display)"></td>
<td><input type="button" class="btnNum" name="btnNum" value="0" onclick="addChar(this.form.display, '0')"></td>
<td><input type="button" class="btnMath" name="btnMath" value="&#46;" onclick="addChar(this.form.display, '&#46;')"></td>
<td><button type="button" class="btnOpps" name="btnOpps" value="x^&#50;" onclick="if(checkNum(this.form.display.value)) { 
 square(this.form)}">&nbsp;&nbsp;&nbsp;x<sup>2</sup></button></td>
 <td><button type="button" class="btnOpps" name="btnOpps" onclick="if(checkNum(this.form.display.value)) { 
 square_y(this.form)}">&nbsp;&nbsp;&nbsp;x<sup>y</sup></button></td>

<td><input type="button" class="btnMath" name="btnMath" value="+" onclick="addChar(this.form.display, '+')"></td>
</tr>
<tr>
<td><input type="button" class="btnMath" name="btnMath" value="(" onclick="addChar(this.form.display, '(')"></td>
<td><input type="button" class="btnMath" name="btnMath" value=")" onclick="addChar(this.form.display,')')"></td>
<td><input type="button" class="btnMath" name="btnMath" value="%" onclick=" percent(this.form.display)"></td>
<td><button type="button" class="btnOpps" name="btnOpps" onclick="if(checkNum(this.form.display.value)) { 
 normal_z(this.form)}"> <p style="margin: 0px; text-align: center; font-size:9px; Line-height:8px;">Nor ►Z <br> x/μ/&#963;</p></button></td>
 <td><button type="button" class="btnOpps" name="btnOpps" onclick="if(checkNum(this.form.display.value)) { 
 cdf_z(this.form)}" > Cdf Z</button></td>

<td><input type="button" class="btnTop" name="btnTop" value="=" onclick="if(checkNum(this.form.display.value)) { compute(this.form) }"></td>

</tr>
</table>
</form>
</body>
<script>
function addChar(input, character) {
if(input.value == null || input.value == "0")
input.value = character
else
input.value += character
}
function cos(form) {
form.display.value = Math.cos(form.display.value);
}
function sin(form) {
form.display.value = Math.sin(form.display.value);
}
function tan(form) {
form.display.value = Math.tan(form.display.value);
}
function sqrt(form) {
form.display.value = Math.sqrt(form.display.value);
}
function sqrt_y(form) {
//form.display.value = Math.sqrt(form.display.value);
globase = form.display.value; //eval(this.form.display.value);
//form.display.value =  mybase;
//return mybase;
form.display.value = 'ⁿ' //eval(form.display.value) * eval(form.display.value)
}
function ln(form) {
form.display.value = Math.log(form.display.value);
}
function lg(form) {
form.display.value = Math.log10(form.display.value);
}

function exp(form) {
form.display.value = Math.exp(form.display.value);
}
function uno_su_x(form) {
form.display.value = eval(1/form.display.value);
}
function deleteChar(input) {
input.value = input.value.substring(0, input.value.length - 1)
}
var val = 0.0;
function percent(input) {
val = input.value;
input.value = input.value + "%";
}
function changeSign(input) {
if(input.value.substring(0, 1) == "-")
input.value = input.value.substring(1, input.value.length)
else
input.value = "-" + input.value
}
function square(form) {
form.display.value =eval(form.display.value) * eval(form.display.value)
}
//var globase = square(form)
function normal_z(form) {
var str = form.display.value;
var occure = (str.split("/").length - 1);
if (occure==2) {
var parts = str.split("/", 3);
var the_x = eval(parts[0]);
var the_mean  =eval(parts[1]);
var the_var = eval(parts[2]);
var result =eval((the_x - the_mean)/the_var);
form.display.value = result;
return
};//form.display.value =  mybase;
//return mybase;
form.display.value = "Insert to Normalize: x/mean/st.dev."; //eval(form.display.value) * eval(form.display.value)
}
function cdf_z(form) {
var j, k, kMax, m, values, total, subtotal, item, z, z2, z4, a, b, cdf_result;
	z = eval(form.display.value);
    // Power series is not stable at these extreme tail scenarios
    if (z < -6) { //return 0; }
	form.display.value="0";
	return }
    if (z >  6) { 
	form.display.value="1";
	return }

    m      = 1;        // m(k) == (2**k)/factorial(k)
    b      = z;        // b(k) == z ** (2*k + 1)
    z2     = z * z;    // cache of z squared
    z4     = z2 * z2;  // cache of z to the 4th
    values = [];

    // Compute the power series in groups of two terms.
    // This reduces floating point errors because the series
    // alternates between positive and negative.
    for (k=0; k<100; k+=2) {
        a = 2*k + 1;
        item = b / (a*m);
        item *= (1 - (a*z2)/((a+1)*(a+2)));
        values.push(item);
        m *= (4*(k+1)*(k+2));
        b *= z4;
    }

    // Add the smallest terms to the total first that
    // way we minimize the floating point errors.
    total = 0;
    for (k=49; k>=0; k--) {
        total += values[k];
    }

    // Multiply total by 1/sqrt(2*PI)
    // Then add 0.5 so that stdNormal(0) === 0.5
   result_cdf = 0.5 + 0.3989422804014327 * total;
   form.display.value = result_cdf ;
}
function square_y(form) {
globase = form.display.value; //eval(this.form.display.value);
//form.display.value =  mybase;
//return mybase;
form.display.value = '^' //eval(form.display.value) * eval(form.display.value)
}
//var globase = square(form)


var globase;

function compute(form) {
var str = form.display.value;
var cha = str.charAt(0);
//var the_string = (form.display.value);
if (cha=="^") {
var parts = str.split('^', 2);
var the_symbol = (parts[0]);
var the_exp  = eval((parts[1]));
var mybase2 = globase;
form.display.value = Math.pow(mybase2, the_exp);
return;
}
if  (cha=="ⁿ") {
var parts = str.split('ⁿ', 2);
//var the_symbol = (parts[0]);
var the_den =  (parts[1]);
var the_exp  =eval(1/the_den);
var mybase2 = globase;
form.display.value = Math.pow(mybase2, the_exp);
return;
}
form.display.value =eval(str);
}

function checkNum(str) {
for (var i = 0; i < str.length; i++) {
var ch = str.charAt(i);
if (ch < "0" || ch > "9") {
if (ch != "/" && ch != "*" && ch != "+" && ch != "-" && ch != "."
&& ch != "(" && ch!= ")" && ch != "%" && ch != "^" && ch != "ⁿ" && ch != ";") {
alert("invalid entry!")
return false
}
}
}
return true
}
</script>
</html>
